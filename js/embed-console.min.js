var EmbedConsole=function(){HTMLElement.prototype.scrollIntoView=function(){this.offsetTop>=this.parentNode.scrollTop+this.parentNode.offsetHeight?this.parentNode.scrollTop=this.offsetTop-this.parentNode.offsetHeight+this.offsetHeight:this.offsetTop<=this.parentNode.scrollTop&&(this.parentNode.scrollTop=this.offsetTop)};var a=function(a){if(a.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var b=document.createRange();b.selectNodeContents(a),b.collapse(!1);var c=window.getSelection();c.removeAllRanges(),c.addRange(b)}else if("undefined"!=typeof document.body.createTextRange){var d=document.body.createTextRange();d.moveToElementText(a),d.collapse(!1),d.select()}},b=function(a){var b=document.createElement("input");return b.id=a.id+"-radio-"+a.history.items.length,b.value=a.history.items.length,b.setAttribute("type","radio"),b.setAttribute("name","log"),b.onchange=function(b){this.checked&&a.updateInput(parseInt(this.value))},b},c=function(a,c,d,e,f){var g="nohighlight",h=c?b(a):void 0,i=document.createElement("li");e=e||"",d instanceof Error&&(e+=" log-error"),d instanceof Error||0==f||(g="javascript",d=JSON.stringify(d,null,2),d&&(d=d.replace(/"(.*)":/gi,"$1:")),console.log(d));var j='<code class="'+g+'">'+d+"</code>";return c&&(j='<label for="'+h.id+'"><code class="javascript">'+c+"</code>"+j+"</label>"),i.className=e,i.innerHTML=j,{element:i,radio:h}},d=function(a){var b=document.getElementById(a);if(!b)throw"Please provide a valid container.";var c={parent:b,container:document.createElement("div")};return c.log=c.container.appendChild(document.createElement("ul")),c.input=c.container.appendChild(document.createElement("div")),c.container.className="console-sandbox",c.log.className="console-log",c.input.className="console-input",c.input.setAttribute("contenteditable","true"),c.parent.appendChild(c.container),c},e=function(a){if(hljs)for(var b=a.getElementsByTagName("code"),c=0;c<b.length;c++)hljs.highlightBlock(b[c])},f=function(a,b){var c=this;b=b||{},this.id=(Math.random()+1).toString(36).substring(16),this.highlightCallback=b.highlight||e,this.elements=d(a),this.elements.input.onkeydown=function(a){var b=this.innerText;if(13==a.which){if(a.shiftKey)return;a.preventDefault(),/\S/.test(b)&&c.execute(b)}else 38===a.which?(a.preventDefault(),c.history.traverseUp(this)):40===a.which&&(a.preventDefault(),c.history.traverseDown(this))}};return f.prototype={history:{position:0,items:[],add:function(a,b,c,d){this.items.push({radio:a,element:b,input:c,output:d}),this.position=this.items.length},traverseUp:function(a){var b=this.items[this.position-1];b&&(b.radio.click(),b.element.scrollIntoView())},traverseDown:function(a){var b=this.items[this.position+1];return b?(b.radio.click(),void b.element.scrollIntoView()):this.reset(a)},reset:function(a){for(var b in this.items)this.items[b].radio.checked=!1;return this.position=this.items.length,a.innerText=""}},populate:function(a){for(var b=0;b<a.length;b++)this.execute(a[b])},updateInput:function(b){var c=this.history.items[b];this.elements.input.innerHTML=c?c.input:"",this.history.position=c?b:this.history.items.length,a(this.elements.input)},add:function(a){var b=c(this,a.input,a.output,a.klass,a.javascript);this.highlightCallback(b.element),b.radio&&(this.elements.log.appendChild(b.radio),this.history.add(b.radio,b.element,a.input,a.output)),this.elements.log.appendChild(b.element),this.elements.log.scrollTop=this.elements.log.scrollHeight},execute:function(a){var b;try{b=eval.call({},a)}catch(a){b=a}this.add({input:a,output:b}),this.history.reset(this.elements.input)}},f}();